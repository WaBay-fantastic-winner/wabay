<main>  
  <section class='py-10 bg-gray-100'>
    <div class="max-w-6xl mx-auto">
      <p class="mb-1 text-center"><a href="">分類</a></p>
      <h1 class="mb-3 text-center"><%= @project.title %></h1>
      <p class="mb-6 text-center">提案者<a href="" class="text-blue-400 hover:text-blue-300"><%= @project.organizer %></a></p>
    </div>
  </section>
  <div class="sticky top-0 z-10 justify-between px-12 bg-white border-t-2 border-b-2 border-gray-300 border-double lg:flex">
    <div class="flex items-center h-16 font-semibold text-gray-400 ">
      <%= link_to '專案內容', project_path(@project), class:" mx-5"%>
      <%= link_to '常見問題', project_questions_path(@project), class:"mx-5"%>
      <%= link_to '留言', project_comments_path(@project), class:"comments-link mx-5"%>
    </div>
    <div class="w-full progressBar lg:w-80 ">
      <div class="w-full stepBar lg:w-64 ">
        <div class="bar"></div>
        <div class="bullet"></div>
        <div class="bullet"></div>
        <div class="bullet"></div>
        <div class="bullet"></div>
      </div>
      <div class="flex justify-between -mx-4 text-xs lg:justify-around lg:mx-0">
        <p class="step-text">企劃概念</p>
        <p class="step-text">樣品狀態</p>
        <p class="step-text">生產階段</p>
        <p class="step-text">產品寄送</p>
      </div>
    </div>
  </div>
  <%# 留言區 %>
  <section class="py-8 border-b-2 border-gray-300 border-double">
    <div class='max-w-6xl grid-cols-10 gap-12 mx-auto lg:grid '>
      <div class='col-span-7 '>
        <div class='p-4 border border-gray-300 rounded-lg '>
          <%= form_with model: @comment, class:'flex', url: project_comments_path(project_id: @project)  do |form| %>
            <%= form.text_area :content, class:"rounded focus:outline-none focus:ring focus:border-blue-300 flex-1", placeholder:'請輸入留言'%>
            <%= form.submit "➤" , class:'text-blue-400 ml-2 px-2 cursor-pointer rounded-full'%>
          <% end %>
        </div>
        <div class=''>
          <ul>
            <% @comments.each do |comment| %>
              <li class="p-4 mt-3 border border-gray-300 rounded-lg">
                <div class='flex justify-between'>
                  <p><%= comment.user.email %></p>
                  <% if comment.user_id == current_user.id %>
                  <%= link_to "刪除留言", comment_path(comment), method: "delete",data: {confirm: "確定要刪除嗎"} , class:'hover:text-red-300'%>
                <% end %>
                </div>
                <div class='my-4'>
                  <p><%= comment.content %></p>
                </div>
                <div class='text-blue-400 ' data-controller="like" data-comment-id="<%=comment.id%>" data-like="<%=current_user.liked?(comment)%>" data-comment-count="<%=comment.count%>"  >
                  <button data-action="click->like#like_comment">
                    <span data-like-target="love">♡</span>
                  </button>
                  <span data-like-target="count">
                    <%= comment.count %>
                  </span>
                </div>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
      <%# silde-bar %>
      <div class='col-span-3'>
        <div class='w-full p-4 border border-gray-300 border-solid rounded-xl'>
          <h2 class='mb-3'><a href=''><%= @project.organizer %></a></h2>
          <p class='mb-3'>動態介紹動態介紹動態介紹動態介紹動態介紹動態介紹動態介紹...<a href='' class='text-blue-400 hover:text-blue-300'>查看更多</a></p>
          <a href='' class="px-2 py-1 text-2xl duration-500 hover:bg-gray-100"><i class="fa-brands fa-square-facebook"></i></a>
          <a href='' class="px-2 py-1 text-2xl duration-500 hover:bg-gray-100"><i class="fa-brands fa-instagram"></i></a>
        </div>
      </div>
    </div>
  </section>
</main>
